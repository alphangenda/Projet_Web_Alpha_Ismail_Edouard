{% extends 'base.html' %}
{% load static %}

{% block title %}Tarif - EcoFlex{% endblock %}

{% block content %}
<div class="container mt-5 gap-0">


    <h2 class="titreVelo">Vélo</h2>
    <section class="servicesVelo">


        <div class="card">
            <div class="card-header d-flex justify-content-center mb-3 align-items-center">
                <div class="type-switch" id="switch-tarif">
                    <button class="type-btn active" data-target="tarif-occasionnel">Occasionnel</button>
                    <button class="type-btn" data-target="tarif-journalier">Journalier</button>
                </div>
            </div>

            <div id="tarif-occasionnel" class="tarif-bloc">
                <div class="price-block">
                    <span class="price">1,00 $</span>
                    <span class="unit">/ déverrouillage</span>
                </div>

                <div class="card-body">
                    <p class="plan-type"><strong>Occasionnel :</strong></p>
                    <ul class="features">
                        <li>Frais de déverrouillage : 1,00 $</li>
                        <li>0,33 $ / minute</li>
                        <li>Dépôt remboursable de 100 $ / vélo</li>
                        <li>Taxes incluses</li>
                    </ul>
                </div>

                <div class="card-footer">
                    <a href="{% if user.is_authenticated %}{% url 'activer_abonnement' 'velo' 'occasionnel' %}{% else %}{% url 'connexion' %}{% endif %}"
                        class="btn-order">
                        Choisir ce forfait →
                    </a>
                </div>
            </div>

            <div id="tarif-journalier" class="tarif-bloc" style="display: none;">
                <div class="price-block">
                    <span class="price">19,00 $</span>
                    <span class="unit">/ 24 h</span>
                </div>

                <div class="card-body">
                    <p class="plan-type"><strong>Journalier :</strong></p>
                    <ul class="features">
                        <li>Trajets illimités de 45 minutes</li>
                        <li>+ 0,33 $ / minute après 45 minutes</li>
                        <li>Dépôt remboursable de 100 $ / vélo</li>
                        <li>Taxes incluses</li>
                    </ul>
                </div>

                <div class="card-footer">
                    <a href="{% if user.is_authenticated %}{% url 'activer_abonnement' 'velo' 'journalier' %}{% else %}{% url 'connexion' %}{% endif %}"
                        class="btn-order">
                        Choisir ce forfait →
                    </a>
                </div>
            </div>
        </div>

        <div class="card cardMiddleVelo highlight">
            <div class="card-header">
                <h3>Abonnement Mensuel</h3>
                <div class="price-block">
                    <span class="price">36,00 $</span>
                    <span class="unit">/ mois</span>
                </div>
            </div>

            <div class="card-body">
                <ul class="features">
                    <li><strong>Trajets illimités</strong> de 30 minutes</li>
                    <li>+ 0,25 $ / minute après 30 minutes</li>
                    <li>Déverrouillage gratuit</li>
                    <li>Aucun dépôt requis</li>
                    <li>Taxes incluses</li>
                </ul>
            </div>

            <div class="card-footer">
                <a href="{% if user.is_authenticated %}{% url 'activer_abonnement' 'velo' 'mensuel' %}{% else %}{% url 'connexion' %}{% endif %}"
                    class="btn-order">
                    S’abonner →
                </a>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h3>Abonnement Annuel</h3>
                <div class="price-block">
                    <span class="price">139,00 $</span>
                    <span class="unit">/ an</span>
                </div>
            </div>

            <div class="card-body">
                <ul class="features">
                    <li><strong>Trajets illimités</strong> de 30 minutes</li>
                    <li>+ 0,25 $ / minute après 30 minutes</li>
                    <li>Déverrouillage gratuit</li>
                    <li>Valide 365 jours consécutifs</li>
                    <li>Taxes incluses</li>
                </ul>
            </div>
            <div class="card-footer">
                <a href="{% if user.is_authenticated %}{% url 'activer_abonnement' 'velo' 'annuel' %}{% else %}{% url 'connexion' %}{% endif %}"
                    class="btn-order">
                    S’abonner →
                </a>
            </div>
        </div>
    </section>

    <h2 class="titreTrotinette"><span>Trotti</span><br><span>nette</span></h2>
    <section class="servicesTrotinette">
        <div class="card">
            <div class="card-header d-flex justify-content-center mb-3 align-items-center">
                <div class="type-switch" id="switch-tarif-trottinette">
                    <button class="type-btn active" data-target="tarif-trottinette-occasionnel">Occasionnel</button>
                    <button class="type-btn" data-target="tarif-trottinette-journalier">Journalier</button>
                </div>
            </div>

            <div id="tarif-trottinette-occasionnel" class="tarif-bloc">
                <div class="price-block">
                    <span class="price">1,25 $</span>
                    <span class="unit">/ déverrouillage</span>
                </div>

                <div class="card-body">
                    <p class="plan-type"><strong>Occasionnel :</strong></p>
                    <ul class="features">
                        <li>Frais de déverrouillage : 1,25 $</li>
                        <li>0,39 $ / minute</li>
                        <li>Dépôt remboursable de 100 $ / trottinette</li>
                        <li>Taxes incluses</li>
                    </ul>
                </div>

                <div class="card-footer">
                    <a href="{% if user.is_authenticated %}{% url 'activer_abonnement' 'trottinette' 'occasionnel' %}{% else %}{% url 'connexion' %}{% endif %}"
                        class="btn-order">
                        Choisir ce forfait →
                    </a>
                </div>
            </div>

            <div id="tarif-trottinette-journalier" class="tarif-bloc" style="display: none;">
                <div class="price-block">
                    <span class="price">22,00 $</span>
                    <span class="unit">/ 24 h</span>
                </div>

                <div class="card-body">
                    <p class="plan-type"><strong>Journalier :</strong></p>
                    <ul class="features">
                        <li>Trajets illimités de 30 minutes</li>
                        <li>+ 0,39 $ / minute après 30 minutes</li>
                        <li>Dépôt remboursable de 100 $ / trottinette</li>
                        <li>Taxes incluses</li>
                    </ul>
                </div>

                <div class="card-footer">
                    <a href="{% if user.is_authenticated %}{% url 'activer_abonnement' 'trottinette' 'journalier' %}{% else %}{% url 'connexion' %}{% endif %}"
                        class="btn-order">
                        Choisir ce forfait →
                    </a>
                </div>
            </div>
        </div>

        <div class="card cardMiddleTrotinette highlight">
            <div class="card-header">
                <h3>Abonnement Mensuel</h3>
                <div class="price-block">
                    <span class="price">45,00 $</span>
                    <span class="unit">/ mois</span>
                </div>
            </div>

            <div class="card-body">
                <ul class="features">
                    <li><strong>Trajets illimités</strong> de 30 minutes</li>
                    <li>+ 0,30 $ / minute après 30 minutes</li>
                    <li>Déverrouillage gratuit</li>
                    <li>Aucun dépôt requis</li>
                    <li>Taxes incluses</li>
                </ul>
            </div>

            <div class="card-footer">
                <a href="{% if user.is_authenticated %}{% url 'activer_abonnement' 'trottinette' 'mensuel' %}{% else %}{% url 'connexion' %}{% endif %}"
                    class="btn-order">
                    S’abonner →
                </a>
            </div>
        </div>


        <div class="card">
            <div class="card-header">
                <h3>Abonnement Annuel</h3>
                <div class="price-block">
                    <span class="price">169,00 $</span>
                    <span class="unit">/ an</span>
                </div>
            </div>

            <div class="card-body">
                <ul class="features">
                    <li><strong>Trajets illimités</strong> de 30 minutes</li>
                    <li>+ 0,30 $ / minute après 30 minutes</li>
                    <li>Déverrouillage gratuit</li>
                    <li>Valide 365 jours consécutifs</li>
                    <li>Taxes incluses</li>
                </ul>
            </div>

            <div class="card-footer">
                <a href="{% if user.is_authenticated %}{% url 'activer_abonnement' 'trottinette' 'annuel' %}{% else %}{% url 'connexion' %}{% endif %}"
                    class="btn-order">
                    S’abonner →
                </a>
            </div>
        </div>
    </section>


    <h2 class="titreVoiture">Voiture</h2>
    <section class="servicesVoiture">
        <div class="card">
            <div class="card-header d-flex justify-content-center mb-3 align-items-center">
                <div class="type-switch" id="switch-tarif-voiture">
                    <button class="type-btn active" data-target="tarif-voiture-occasionnel">Occasionnel</button>
                    <button class="type-btn" data-target="tarif-voiture-journalier">Journalier</button>
                </div>
            </div>

            <div id="tarif-voiture-occasionnel" class="tarif-bloc">
                <div class="price-block">
                    <span class="price">14,00 $</span>
                    <span class="unit">/ heure</span>
                </div>

                <div class="card-body">
                    <p class="plan-type"><strong>Occasionnel :</strong></p>
                    <ul class="features">
                        <li>Tarif horaire : 14,00 $</li>
                        <li>Recharge incluse sur les bornes partenaires</li>
                        <li>Assurance de base incluse</li>
                        <li>Limite de 150 km / jour (0,30 $ / km sup.)</li>
                        <li>Taxes incluses</li>
                    </ul>
                </div>

                <div class="card-footer">
                    <a href="{% if user.is_authenticated %}{% url 'activer_abonnement' 'voiture' 'occasionnel' %}{% else %}{% url 'connexion' %}{% endif %}"
                        class="btn-order">
                        Choisir ce forfait →
                    </a>
                </div>
            </div>

            <div id="tarif-voiture-journalier" class="tarif-bloc" style="display: none;">
                <div class="price-block">
                    <span class="price">60,00 $</span>
                    <span class="unit">/ jour</span>
                </div>

                <div class="card-body">
                    <p class="plan-type"><strong>Journalier :</strong></p>
                    <ul class="features">
                        <li>Forfait 24 heures : 60,00 $</li>
                        <li>Recharge incluse sur les bornes partenaires</li>
                        <li>Assurance de base incluse</li>
                        <li>Limite de 200 km / jour (0,30 $ / km sup.)</li>
                        <li>Taxes incluses</li>
                    </ul>
                </div>

                <div class="card-footer">
                    <a href="{% if user.is_authenticated %}{% url 'activer_abonnement' 'voiture' 'journalier' %}{% else %}{% url 'connexion' %}{% endif %}"
                        class="btn-order">
                        Choisir ce forfait →
                    </a>
                </div>
            </div>
        </div>

        <div class="card cardMiddleVoiture highlight">
            <div class="card-header">
                <h3>Abonnement Mensuel</h3>
                <div class="price-block">
                    <span class="price">9,50 $</span>
                    <span class="unit">/ heure</span>
                </div>
            </div>

            <div class="card-body">
                <ul class="features">
                    <li><strong>Trajets illimités</strong> selon disponibilité</li>
                    <li>Recharge et assurance incluses</li>
                    <li>Limite de 250 km / jour (0,25 $ / km sup.)</li>
                    <li>Aucun frais de réservation</li>
                    <li>Taxes incluses</li>
                </ul>
            </div>

            <div class="card-footer">
                <a href="{% if user.is_authenticated %}{% url 'activer_abonnement' 'voiture' 'mensuel' %}{% else %}{% url 'connexion' %}{% endif %}"
                    class="btn-order">
                    S’abonner →
                </a>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h3>Abonnement Annuel</h3>
                <div class="price-block">
                    <span class="price">7,50 $</span>
                    <span class="unit">/ heure</span>
                </div>
            </div>

            <div class="card-body">
                <ul class="features">
                    <li><strong>Trajets illimités</strong> selon disponibilité</li>
                    <li>Recharge et assurance incluses</li>
                    <li>Limite de 300 km / jour (0,20 $ / km sup.)</li>
                    <li>Réservations prioritaires et service premium</li>
                    <li>Taxes incluses</li>
                </ul>
            </div>

            <div class="card-footer">
                <a href="{% if user.is_authenticated %} {% url 'activer_abonnement' 'voiture' 'annuel' %}{% else %}{% url 'connexion' %}{% endif %}"
                    class="btn-order">
                    S’abonner →
                </a>
            </div>
        </div>
    </section>
</div>

{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const allSwitches = document.querySelectorAll('.type-switch');

        allSwitches.forEach(switchElement => {
            const buttons = switchElement.querySelectorAll('.type-btn');

            buttons.forEach(btn => {
                btn.addEventListener('click', function (e) {
                    e.preventDefault();

                    buttons.forEach(b => b.classList.remove('active'));

                    btn.classList.add('active');

                    const card = switchElement.closest('.card');

                    card.querySelectorAll('.tarif-bloc')
                        .forEach(bloc => bloc.style.display = 'none');

                    const targetId = btn.getAttribute('data-target');
                    const targetElement = document.getElementById(targetId);

                    if (targetElement) {
                        targetElement.style.display = 'block';
                    }
                });
            });
        });
    });
</script>
{% endblock %}

{% block extra_css %}
<style>
    body {
        background: radial-gradient(circle at 25% 25%, #fafafa, #ffffff);
    }

    .titreVelo,
    .titreTrotinette,
    .titreVoiture {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        font-weight: 900;
        color: black;
        z-index: 0;
        pointer-events: none;
        margin-bottom: 1rem;
    }

    .titreVelo {
        top: 200px;
        transform: translateX(-50%) skewX(-10deg);
        font-size: 12rem;

    }

    .titreTrotinette {
        font-size: 8rem;
        color: black;
        transform: translateX(-50%) skewX(-10deg);
        line-height: 125px;
    }

    .titreVoiture {
        transform: translateX(-50%) skewX(-10deg);
        font-size: 8rem;
        letter-spacing: -5px;
    }


    .servicesVelo,
    .servicesTrotinette,
    .servicesVoiture {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 2rem;
        justify-items: center;
        align-items: start;
        margin-top: 2rem;
        margin-bottom: 10rem;
        position: relative;
        z-index: 1;
    }

    .card {
        background: rgba(0, 0, 0, 0.05);
        padding: 2.5rem 2rem;
        border-radius: 20px;
        border: 1px solid rgba(0, 0, 0, 0.04);
        box-shadow: 0 12px 24px rgba(0, 0, 0, 0.04);
        transition: all 0.3s ease;
    }

    .type-switch {
        display: flex;
        justify-content: space-between;
        padding: 4px;
        border-radius: 999px;
        background: #111;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.25);
    }

    .type-btn {
        border: none;
        outline: none;
        cursor: pointer;
        display: flex;
        justify-content: center;
        padding: 8px 20px;
        border-radius: 999px;
        background: transparent;
        color: #f5f5f5;
        font-size: 0.9rem;
        font-weight: 500;
        width: 50%;
    }

    .type-btn.active {
        background: #fff;
        color: #111;
    }




    .cardMiddleVelo {
        margin-top: 15rem;
    }

    .cardMiddleTrotinette {
        margin-top: 18rem;
    }

    .cardMiddleVoiture {
        margin-top: 11rem;
    }

    .card:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 12px 24px rgba(0, 0, 0, 0.8);
    }

    .highlight {
        background: linear-gradient(180deg, #f8fafc 0%, #ffffff 100%);
        border: 1px solid #e2e8f0;
        transform: scale(1.03);
    }

    .highlight::before {
        content: "Populaire";
        position: absolute;
        top: 1.2rem;
        right: 1.2rem;
        background: #0f172a;
        color: white;
        font-size: 0.7rem;
        letter-spacing: 0.5px;
        padding: 0.3rem 0.6rem;
        border-radius: 9999px;
    }

    .card-header {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
    }

    .card-header h3 {
        font-size: 1.3rem;
        font-weight: 700;
        color: #0f172a;
        margin: 0;
    }

    .price-block {
        display: flex;
        align-items: baseline;
        gap: 0.3rem;
    }

    .price-block .price {
        font-size: 2rem;
        font-weight: 800;
        color: #0f172a;
    }

    .price-block .unit {
        font-size: 0.9rem;
        color: #64748b;
    }

    .card-body {
        display: flex;
        flex-direction: column;
        gap: 0.6rem;
        color: #334155;
    }

    .card-body .plan-type {
        font-size: 1rem;
        color: #0f172a;
        margin-bottom: 0.5rem;
    }

    .features {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .features li {
        display: flex;
        align-items: flex-start;
        gap: 0.6rem;
        line-height: 1.5;
    }

    .features li::before {
        content: "•";
        color: #94a3b8;
        font-weight: bold;
        font-size: 1.2rem;
        line-height: 1.2;
    }

    .card-footer {
        margin-top: 1rem;
    }



    .btn-order {
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        box-shadow: 0 4px 12px rgba(19, 94, 12, 0.966);
        color: #fff;
        border-radius: 9999px;
        padding: 0.75rem 1.5rem;
        font-weight: 500;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-block;
    }

    .btn-order:hover {
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        letter-spacing: 0.5px;
    }



    @media (max-width: 768px) {
        .card {
            max-width: 100%;

        }
    }
</style>
{% endblock %}